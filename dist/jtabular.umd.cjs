(function(i,c){typeof exports=="object"&&typeof module<"u"?module.exports=c():typeof define=="function"&&define.amd?define(c):(i=typeof globalThis<"u"?globalThis:i||self,i.jtabular=c())})(this,function(){"use strict";return(c,T="horizontal",x=[],A=[])=>{Array.isArray(c)||(c=[c]);const f=(w,b=0)=>{const r=document.createElement("table"),p=document.createElement("thead"),u=document.createElement("tbody"),o=new Set,m=[];b!==0&&r.classList.add("nested-table");const L=(l,t={},n=0)=>{for(const[e,d]of Object.entries(l))if(!A.includes(e))if(typeof d=="object"&&d!==null){if(Array.isArray(d)){const a=f(d,n+1),y=document.createElement("td");y.appendChild(a),t[e]=y.outerHTML}o.add(e)}else t[e]=d,o.add(e);m.push(t)};w.forEach(l=>L(l));const s=document.createElement("table"),h=document.createElement("td"),E=document.createElement("tr");s.classList.add("mix-table"),h.setAttribute("colspan",o.size+1);const H=()=>{C(!0),h.appendChild(s),E.appendChild(h),r.appendChild(E)},V=(l=!1)=>{o.forEach(t=>{if(x.includes(t))return;const n=document.createElement("tr"),e=document.createElement("th");e.textContent=t,n.appendChild(e),m.forEach(d=>{const a=document.createElement("td");a.innerHTML=d[t]??"",n.appendChild(a)}),o.delete(t),r.appendChild(n)})},C=(l=!1)=>{const t=document.createElement("tr");o.forEach(n=>{const e=document.createElement("th");e.textContent=n,t.appendChild(e),p.appendChild(t)}),m.forEach(n=>{const e=document.createElement("tr");o.forEach(d=>{const a=document.createElement("td");(l||String(n[d]).match("nested-table"))&&a.setAttribute("valign","top"),a.innerHTML=n[d]??"",e.appendChild(a)}),u.appendChild(e)}),l?(s.appendChild(p),s.appendChild(u)):(r.appendChild(p),r.appendChild(u))};return T==="vertical"&&b===0?(V(),H()):C(),r};return f(c)}});
